<!DOCTYPE html>
<html>
<head>
    <title>Annotator README</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
<body>
    <h1>Dokumentation for servicen "Annotator"</h1>    
    <article>
        <h2>Generel Beskrivelse</h2>
        <p>
            Annotator er en REST baseret webservice med 3 hovedformål:
            <ol>
                <li>læse og skrive kommentarer tilknyttet en resource identificeret ved en URI.</li>
                <li>læse og skrive tags tilknyttet en resource identificeret ved en URI.</li>
                <li>læse og skrive relationer mellem resourcer. Relationer er implementeret som simple <a href="http://www.w3.org/TR/xlink11/">XLinks v. 11</a></li>
            </ol>
            Annotator skal i første omgang bruges af luftfotoprojektet samt evt. brevprojektet.<br/>
            Annotators relations del, skal implementere objekters komplekse struktur i COP.
        </p>
        
        <h2>1. line support</h2>
        <p>
        Servicen er en backend service. Der er ingen brugere der taler direkte med annotator.<br/>
            <ul>
                <li>Services er i produktion på serveren http://{server}.kb.dk</li>
                <li>Servicen kan testes på følgende URL http://{server}/annotation/http:%2F%2Fwww.kb.dk/tag. Her skal enten svares med en liste af tags, eller "ingen tags"</li>
                <li>Eksempel på tags kan findes via, http://localhost:8080/annotation/tag_aerial/?uri=/images/luftfo/2011/maj/luftfoto/object62356 </li>
            </ul>
        </p>
        <h2>Tekniske Noter</h2>
        <h3>Forudsætninger</h3>
        <p>
            <ul>
                <li>Java minimum version 1.6 (testet med openjdk 1.6.0_20) - bemærk at her skal bruges et fuldt JDK og ikke kun JRE</li>
                <li>Apache ant version 1.8.0</li>
                <li>Oracle 10.g (tests kører mod udvikling2.kb.dk:1521:udvl2, prod kører mod oracledb.kb.dk:1521:prod)</li>
               
             </ul>
        </p>
        <h3>Udrulning</h3>
        <p>
        <span style="font-weight:bold">Hent nyeste version af koden</span><br/>
        <span style="font-style:italic">svn checkout svn+ssh://code-01.kb.dk/home/svn/Annotator/trunk</span><br/>
        <p>Producer en war fil via kommandoen: mvn install </p>
        <p>Hudson Continous integration serveren bygger annotation engine, kan findes her  </p>


	<span style="font-weight:bold">Opret tabller i databasen</span><br/>
        <span style="font-style:italic">Sker via Cop2-Backendens oprettelses script.</span><br/>

	<span style="font-weight:bold">Indsæt testdatasæt (2 rækker i tags tabellen)</span><br/>
        <span style="font-style:italic">Køre sql script: scripts/annotator-tag.sql</span><br/>


        
        </p>
        
        <h3>Konfiguration</h3>

        <h4>Logning</h4>
        <p>
        Konfiguration af logning via log4j. konfiguration foretages i filen <a href="http://code.kb.dk/cgi-bin/viewvc.cgi/luftfoto/trunk/annotator/conf_env/log4j_prod.xml?view=co">log4j_prod.xml</a>
        </p>
        
        <h2>Backup</h2>
        <p>
            Der tages ikke backup af services selv, men af de data der gemmes i Oracle. Disse indgår i
            alm Oracle backup.
        </p>
        <h2>Overvågning</h2>
            Vigtigste overvågning er på Oracle.<br/> 
            Der kan etableres Nagios overvågning på http://{server}/annotation/http:%2F%2Fwww.kb.dk/tag<br/>
        <p>
        
        </p>
   </article>
</body>
</html>
